<head>
  <title>news</title>
  <script>
	var SpritzSettings = {
		clientId: "91b914ccc9a69290f",
		redirectUri: "/spritz_login"
	};
	</script>
	<script src="//sdk.spritzinc.com/js/2.0/js/spritz.min.js"></script>
</head>

<body>
	<div id="spritz-home" class="hide">
  		<div id="spritzer">
	
  		</div>
  	</div>
</body>

<template name="welcome">
	<div class="container">
		<div class="row">
			<h1>Welcome</h1>
		</div>
		<div class="row">
			<div class="six columns">
				<button id="start" class="button-primary u-full-width">
					Start
				</button>
			</div>
			<div class="six columns">
				<button id="enter" class="button u-full-width">
					Enter
				</button>
			</div>
		</div>
	</div>
</template>

<template name="start">
 <div id="start" class="container plain-modal">
  <button class="close">&times;</button>
  <h1>Start</h1>
   <form>
   <div class="row">
    <div class="six columns">
     <label>Email</label>
     <input type="email"/>			
	</div>
	<div class="six columns">
     <label>Password</label>
     <input type="password"/>			
	</div>
   </div>
  </form>
 </div>
</template>

<template name="enter">
 <div id="enter" class="container plain-modal">
 <button class="close">&times;</button>
 <h1>Enter</h1>
  <form>
   <div class="row">
    <div class="six columns">
     <label>Email</label>
     <input type="email"/>			
	</div>
	<div class="six columns">
     <label>Password</label>
     <input type="password"/>			
	</div>
   </div>
  </form>
  <div class="row">
  <button id="enter-ok" class="pull-right button-primary">OK</button>
  </div>
 </div>
</template>

<template name="yepnope">
  <div class="row yepnope">
  <div class="split">
   <button class="u-full-width button nope">Nope - ({{nopes}})</button>
  </div>
  <div class="split">
   <button class="u-full-width button yep">Yep - ({{yeps}})</button>
  </div> 
  </div>
</template>

<template name="look">
 <div class="container">
 <h1>Headlines</h1>

  <div class="row">
  <div class="headline-holder">
	<div class="current headline">
	 <h3>{{currentStory.title}}</h3>
	 <p>{{currentStory.description}}</p>
	</div>
  </div>
  </div>
  {{ #with data}}
  {{ > yepnope }}
  {{/with}}
  {{ > progress }}
  <br/>
  <div class="row">
  	<div class="ten columns">
	<span>Articles:</span>
  	{{#each readlist}}
	{{#if text}}
	<span class="animated bounce">Ready</span>
	{{else}}
	<span class="animated zoomIn">Loading</span>
	{{/if}}
	{{/each}}
	</div>
	<div class="two columns">
		{{#if enough}}
		<button id="readnow" class="button-primary">Read</button>
		{{else}}
		<p>Yep More!</p>
		{{/if}}
	</div>
  </div>
  
  <div id="iframeholder" class="hide">
  </div>
 </div>
</template>

<template name="progress">
 <div class="progress outter">
  <div class="inner">
  </div>
 </div>
</template>

<template name="redicle">
	<div id="spritz-holder"></div>
	<br/>
</template>

<template name="read">
 <div class="container">
 <h1>Read</h1>
  {{ > progress }}

  {{ > redicle }}
  <div class="row">
  	<div class="split">
		{{#if isStart}}
		&nbsp;
		{{/if}}
		{{#if isReady}}
		<button id="show-comments" class="button u-full-width">
			Comments:&nbsp;<span>{{comments.length}}</span>
		</button>
		{{/if}}
		{{#if isDone}}
		<button id="show-comments" class="button u-full-width">
			Comments:&nbsp;<span>{{comments.length}}</span>
		</button>
		{{/if}}
	</div>
	<div class="split">
		{{#if isStart}}
		<button onclick="$(this).trigger('playSpritz')" class="play-spritz button-primary u-full-width">Start</button>
		{{/if}}
		{{#if isReady}}
		<button onclick="$(this).trigger('playSpritz')" class="play-spritz button-primary u-full-width">Next</button>
		{{/if}}
		{{#if isDone}}
		<button id="done-reading" class="button-primary u-full-width">Done</button>
		{{/if}}
	</div>
  
  </div>
 </div>
</template>

<template name="talk">
 <div class="container plain-modal">
 <button class="close">&times;</button>
  <h1>Discussion</h1>
  {{#if prevComments }}
  	{{#if moreComments}}
	 	<div class="comment-holder">
			<div class="current comment">
			<p>{{currentComment.text}}</p>
			<p>{{currentComment.author}}</p>
			</div>
		</div>
		{{#with data}}
		{{ > yepnope }}
		{{/with}}
	{{else}}
		<h2>No More Comments</h2>
	{{/if}}
  {{else}}
  <div>
	<h2>No Comments Yet</h2>  
  </div>
  {{/if}}
  <hr/>
  <h1>Talk</h1>
   <div class="row">
	<textarea placeholder="Add comment..." class="u-full-width"></textarea>
  </div>
  <div class="row">
    <div class="split">
     <button class="hide button u-full-width">Preview</button>
	 &nbsp;
	</div>    
	<div class="split">
     <button id="add-comment" class="button-primary u-full-width">Submit</button>
	</div>
  </div>
 </div>
</template>

<template name="review">
 <div class="container">
  <h1>Review</h1>
  <div class="row">
 	<div class="six columns">
	  Words
	</div>
	<div class="six columns">
	  ####
	</div>
  </div>
  <div class="row">
   <div class="split">
   	 <button id="link-profile" class="button u-full-width">Profile</button>
   </div>
   <div class="split">
   	 <button id="link-headlines" class="button-primary u-full-width">Headlines</button>
   </div>
  </div>
 </div>
</template>

<template name="me">
 <div class="container">
 <h1>Me</h1>
  <div class="row">

  </div>
 </div>
</template>

<template name="spritz_login">
		<script type="text/javascript">
			var hash = window.location.hash;
			var origin = window.location.protocol + "//" + window.location.host;

			// also set token as window.name, just as a crazy fail safe
			window.name = hash;

			// postMessage does not work reliably in IE, pass the value through localStorage
            if (typeof(localStorage) !== 'undefined') {
                try {
                	localStorage.setItem("spritz.authResponse", hash);
            	}
            	catch(e) {
            		if(console) {
            			console.log(e, 'Can\'t write to localStorage');
            		}
            	}
            }

            if (window.opener) {
               window.opener.postMessage(hash, origin);
            }
		</script>
</template>
