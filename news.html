<head>
  <title>news</title>
  <script>
	var SpritzSettings = {
		clientId: "91b914ccc9a69290f",
		redirectUri: location.origin + "/spritz_login"
	};
	</script>
	<script src="//sdk.spritzinc.com/js/2.0/js/spritz.min.js"></script>
</head>

<body>
	<div id="spritz-home" class="hide">
  		<div id="spritzer">
	
  		</div>
  	</div>
	<div id="iframeholder" class="hide">
  	</div>
</body>

<template name="welcome">
	<div class="container">
		<div class="row">
			<h1>Welcome</h1>
		</div>
		<div class="row">
			<div class="six columns">
				<button id="start" class="button-primary u-full-width">
					Start
				</button>
			</div>
			<div class="six columns">
				<button id="enter" class="button u-full-width">
					Enter
				</button>
			</div>
		</div>
	</div>
</template>

<template name="start">
 <div id="start" class="container plain-modal">
  <button class="close">&times;</button>
  <h1>Start</h1>
  {{ > progress }}
   {{ #if isEmail }}
   <div id="enter-email">
   	<div class="row">
     <label>Your First Name:</label>
     <input placeholder="Only the first letter will appear to others" class="u-full-width" type="text"/>
	</div>
	<div class="row">
     <label>Your Email:</label>
     <input placeholder="me@sample.com" class="u-full-width" type="email"/>
	</div>
	<div class="row">
		<button class="button-primary u-full-width next-step">Continue</button>
    </div>
   </div>
   {{ /if }}
   {{ #if isPersonal }}
   <div id="enter-personal">
   	{{ > quizPersonal }}
   </div>
   {{ /if }}
   {{ #if isEconomic }}   
   <div id="enter-economic">
   	{{ > quizEcon }}
   </div>
   {{ /if }}
   {{ #if isPassword }}
   <div id="enter-password">
	<div class="row">
     <label>Password</label>
     <input placeholder="Secure Password" class="u-full-width" type="password"/>			
	</div>
	<div class="row">
		<button type="button" class="button-primary u-full-width new-user">Continue</button>
	</div>
   </div>
   {{/if}}
 </div>
</template>

<template name="quizPersonal">
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="row">
                <div class="nine columns"><span class="quiz-heading">Personal Issues</span></div>
                <div class="one column"><span class="quiz-heading">Yep</span></div>
                <div class="one column"><span class="quiz-heading">Maybe</span></div>
                <div class="one column"><span class="quiz-heading">Nope</span></div>
            </div>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="nine columns">Government should not censor speech, press, media, or internet.</div>
                <div class="one column">
                    <input type="radio" name="question1" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question1" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question1" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">Military service should be voluntary. There should be no draft.</div>
                <div class="one column">
                    <input type="radio" name="question2" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question2" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question2" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">There should be no laws regarding sex for consenting adults.</div>
                <div class="one column">
                    <input type="radio" name="question3" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question3" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question3" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">Repeal laws prohibiting adult possession and use of drugs.</div>
                <div class="one column">
                    <input type="radio" name="question4" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question4" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question4" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">There should be no National ID card.</div>
                <div class="one column">
                    <input type="radio" name="question5" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question5" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question5" value="-1" />
                </div>
            </div>
			<div class="row">
				<button type="button" class="button-primary u-full-width next-step">Continue</button>
			</div>
        </div>
    </div>
	</template>
	<template name="quizEcon">
    <div id="enter-economic" class="panel panel-default">
        <div class="panel-heading">
            <div class="row">
                <div class="nine columns"><span class="quiz-heading">Economic Issues</span></div>
                <div class="one column"><span class="quiz-heading">Yep</span></div>
                <div class="one column"><span class="quiz-heading">Maybe</span></div>
                <div class="one column"><span class="quiz-heading">Nope</span></div>
            </div>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="nine columns">End "corporate welfare." No government handouts to business.</div>
                <div class="one column">
                    <input type="radio" name="question6" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question6" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question6" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">End government barriers to international free trade.</div>
                <div class="one column">
                    <input type="radio" name="question7" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question7" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question7" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">Let people control their own retirement; privatize Social Security.</div>
                <div class="one column">
                    <input type="radio" name="question8" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question8" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question8" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">Replace government welfare with private charity.</div>
                <div class="one column">
                    <input type="radio" name="question9" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question9" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question9" value="-1" />
                </div>
            </div>
            <div class="row">
                <div class="nine columns">Cut taxes and government spending by 50% or more.</div>
                <div class="one column">
                    <input type="radio" name="question10" value="1" />
                </div>
                <div class="one column">
                    <input type="radio" name="question10" value="0" />
                </div>
                <div class="one column">
                    <input type="radio" name="question10" value="-1" />
                </div>
            </div>
			<div class="row">
				<button class="button-primary u-full-width next-step">Continue</button>
			</div>
        </div>
    </div>
</template>

<template name="enter">
 <div id="enter" class="container plain-modal">
 <button class="close">&times;</button>
 <h1>Enter</h1>
  <form>
   <div class="row">
    <div class="six columns">
     <label>Email</label>
     <input type="email"/>			
	</div>
	<div class="six columns">
     <label>Password</label>
     <input type="password"/>			
	</div>
   </div>
  </form>
  <div class="row">
  <button id="enter-ok" class="pull-right button-primary">OK</button>
  </div>
 </div>
</template>

<template name="yepnope">
  <div class="row yepnope">
  <div class="split">
   <button class="u-full-width button nope">Nope - ({{nopes}})</button>
  </div>
  <div class="split">
   <button class="u-full-width button yep">Yep - ({{yeps}})</button>
  </div> 
  </div>
</template>

<template name="look">
 <div class="container">
 <h1>Headlines</h1>

  <div class="row">
  <div class="headline-holder">
	<div class="current headline">
	 <h3>{{currentStory.title}}</h3>
	 <p>{{currentStory.description}}</p>
	</div>
  </div>
  </div>
  {{ #with data}}
  {{ > yepnope }}
  {{/with}}
  {{ > progress }}
  <br/>
  <div class="row">
  	<div class="ten columns">
	<span>Loading:</span>
	{{#each readlist}}
	{{#if text}}
	<span class="badge ready animated bounce"></span>
	{{else}}
	<span class="badge loading animated zoomIn"></span>
	{{/if}}
	{{/each}}

	</div>
	<div class="two columns">
		{{#if enough}}
		<button id="readnow" class="button-primary">Read</button>
		{{else}}
		<p>Yep More!</p>
		{{/if}}
	</div>
  </div>
 </div>
</template>

<template name="progress">
 <div class="progress outter">
  <div class="inner">
  </div>
 </div>
</template>

<template name="redicle">
	<div id="spritz-holder"></div>
	<br/>
</template>

<template name="read">
 <div class="container">
 <h1>Read
  	{{#each readlist}}
	{{#if text}}
	<span class="badge ready"></span>
	{{else}}
	<span class="badge loading"></span>
	{{/if}}
	{{/each}}
 </h1>
  {{ > progress }}

  {{ > redicle }}
  <div class="row">
  	<div class="split">
		{{#if isStart}}
		&nbsp;
		{{/if}}
		{{#if isReady}}
		<button id="show-comments" class="button u-full-width">
			Comments:&nbsp;<span>{{comments.length}}</span>
		</button>
		{{/if}}
		{{#if isDone}}
		<button id="show-comments" class="button u-full-width">
			Comments:&nbsp;<span>{{comments.length}}</span>
		</button>
		{{/if}}
	</div>
	<div class="split">
		{{#if isStart}}
		<button onclick="$(this).trigger('playSpritz')" class="play-spritz button-primary u-full-width">Start</button>
		{{/if}}
		{{#if isReady}}
		<button onclick="$(this).trigger('playSpritz')" class="play-spritz button-primary u-full-width">Next</button>
		{{/if}}
		{{#if isDone}}
		<button id="done-reading" class="button-primary u-full-width">Done</button>
		{{/if}}
	</div>
  
  </div>
 </div>
</template>

<template name="talk">
 <div class="container plain-modal">
 <button class="close">&times;</button>
  <h1>Discussion</h1>
  {{#if prevComments }}
  	{{#if moreComments}}
	 	<div class="comment-holder">
			<div class="current comment">
			<p>{{currentComment.text}}</p>
			<p>{{currentComment.author}}</p>
			</div>
		</div>
		{{#with data}}
		{{ > yepnope }}
		{{/with}}
	{{else}}
		<h2>No More Comments</h2>
	{{/if}}
  {{else}}
  <div>
	<h2>No Comments Yet</h2>  
  </div>
  {{/if}}
  <hr/>
  <h1>Talk</h1>
   <div class="row">
	<textarea placeholder="Add comment..." class="u-full-width"></textarea>
  </div>
  <div class="row">
    <div class="split">
     <button class="hide button u-full-width">Preview</button>
	 &nbsp;
	</div>    
	<div class="split">
     <button id="add-comment" class="button-primary u-full-width">Submit</button>
	</div>
  </div>
 </div>
</template>

<template name="review">
 <div class="container">
  <h1>Round Complete</h1>
  <div class="row">
   <div class="split">
   	 <button id="link-profile" class="button u-full-width">Profile</button>
   </div>
   <div class="split">
   	 <button id="link-headlines" class="button-primary u-full-width">Continue</button>
   </div>
  </div>
  <hr/>
  <div class="row">
   <h2>What You've Read&hellip;</h2>
  </div>
 </div>
</template>

<template name="badge">
<div class="person">
  A
</div>
</template>

<template name="me">
 <div class="container">
 <h1>
  <span data-intro="Your response to 'The World's Smallest Political Quiz'" data-position="right">
   {{ > badge }}
  </span>
 	 Me
 </h1>
  <div class="row" data-intro="Come back to see your 'Yep/Nope' scores here." data-position="bottom">
	<img class="u-full-width" src="http://placehold.it/500x200"/>
  </div>
  <br/>
  <div class="row" >
  	<div class="split"> &nbsp;
		<button class="u-full-width button hide">Retake Political Quiz</button>
	</div>
	<div class="split" data-intro="Start reading Headlines!" data-position="top">
		<button id="to-headlines" class="u-full-width button-primary" >Headlines</button>
	</div>
  </div>
 </div>
</template>

<template name="spritz_login">
		<script type="text/javascript">
			var hash = window.location.hash;
			var origin = window.location.protocol + "//" + window.location.host;

			// also set token as window.name, just as a crazy fail safe
			window.name = hash;

			// postMessage does not work reliably in IE, pass the value through localStorage
            if (typeof(localStorage) !== 'undefined') {
                try {
                	localStorage.setItem("spritz.authResponse", hash);
            	}
            	catch(e) {
            		if(console) {
            			console.log(e, 'Can\'t write to localStorage');
            		}
            	}
            }

            if (window.opener) {
               window.opener.postMessage(hash, origin);
            }
		</script>
</template>
